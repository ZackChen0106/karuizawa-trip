document.addEventListener("DOMContentLoaded", () => {

  /* ========= 行李清單完成度＋記憶 ========= */
  const STORAGE_KEY = "packing-checklist";

  const checkboxes = document.querySelectorAll('.checkItem input');
  const progressEl = document.getElementById("packingProgress");

  // 讀取儲存狀態
  const saved = JSON.parse(localStorage.getItem(STORAGE_KEY) || "{}");

  checkboxes.forEach((cb, index) => {
    const key = `item-${index}`;
    cb.dataset.key = key;

    if (saved[key]) cb.checked = true;

    cb.addEventListener("change", () => {
      saved[key] = cb.checked;
      localStorage.setItem(STORAGE_KEY, JSON.stringify(saved));
      updateProgress();
    });
  });

  function updateProgress(){
    const total = checkboxes.length;
    const checked = [...checkboxes].filter(cb => cb.checked).length;
    if (progressEl){
      progressEl.textContent = `已完成 ${checked} / ${total}`;
    }
  }

  updateProgress();

});
