<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>2026 åˆæ˜¥ Â· è¼•äº•æ¾¤</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" href="style.css" />
  <link rel="manifest" href="manifest.json" />

  <!-- Day Flow ç·šæ¢ -->
  <style>
    .flow {
      position: relative;
      margin-left: 8px;
      padding-left: 16px;
    }
    .flow::before {
      content: '';
      position: absolute;
      left: 6px;
      top: 0;
      bottom: 0;
      width: 2px;
      background: rgba(255,255,255,0.15);
    }
    .flowItem {
      position: relative;
      padding: 8px 0 8px 16px;
    }
    .flowItem .dot {
      position: absolute;
      left: -2px;
      top: 14px;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: #fff;
    }
  </style>
</head>

<body data-page="home">
  <div class="app">

    <!-- Hero -->
    <div class="hero" id="hero">
      <div class="heroContent">
        <h1 class="heroTitle" id="heroTitle">2026 åˆæ˜¥ Â· è¼•äº•æ¾¤</h1>
        <p class="heroSub" id="heroSub">æ…¢æ…¢èµ°ï¼ŒæŠŠæ™‚é–“ç•™çµ¦å½¼æ­¤</p>
        <div class="pillRow">
          <span class="pill" id="pillDay">è·é›¢å‡ºç™¼ 62 å¤©</span>
          <span class="pill" id="pillLoc">ğŸ“ è¼•äº•æ¾¤</span>
        </div>
      </div>
    </div>

    <div class="pages">

      <!-- Home -->
      <section class="page active" data-page="home">
        <div class="main">
          <div class="card" id="todayCard" style="cursor:pointer;">
            <div class="cardHeader">
              <h2 class="cardTitle">TODAY</h2>
              <span class="cardHint" id="todayHint">è‡ªå‹•æ›´æ–°</span>
            </div>
            <div class="bigRow">
              <div>
                <p class="bigText" id="todayMain">å‡ºç™¼å‰ï½œæº–å‚™å°±ç·’</p>
                <p class="subText" id="todayRoute">â€”</p>
                <p class="subText" id="todayNote">â€”</p>
              </div>
              <div class="arrowBtn">â€º</div>
            </div>
          </div>
        </div>
      </section>

      <!-- Itinerary -->
      <section class="page" data-page="itinerary">
        <div class="pageWrap">
          <h2 class="pageTitle">ğŸ—ºï¸ è¡Œç¨‹</h2>

          <div class="card" id="day1">
            <div class="cardHeader">
              <h3 class="cardTitle">DAY 1ï½œ02/21</h3>
              <span class="cardHint">æ¡ƒåœ’ â†’ è¼•äº•æ¾¤</span>
            </div>
            <div class="flow">
              <div class="flowItem"><span class="dot"></span><div>06:40 æ¡ƒåœ’èµ·é£›</div></div>
              <div class="flowItem"><span class="dot"></span><div>10:40 æŠµé”æˆç”°</div></div>
              <div class="flowItem"><span class="dot"></span><div>ä¸‹åˆ å‰å¾€è¼•äº•æ¾¤</div></div>
            </div>
          </div>

          <div class="card" id="day2">
            <div class="cardHeader">
              <h3 class="cardTitle">DAY 2ï½œ02/22</h3>
              <span class="cardHint">è¼•äº•æ¾¤</span>
            </div>
            <div class="flow">
              <div class="flowItem"><span class="dot"></span><div>é›²å ´æ± æ•£ç­–</div></div>
              <div class="flowItem"><span class="dot"></span><div>Outlet é€›è¡—</div></div>
            </div>
          </div>

          <div class="card" id="day3">
            <div class="cardHeader">
              <h3 class="cardTitle">DAY 3ï½œ02/23</h3>
              <span class="cardHint">è¼•äº•æ¾¤ â†’ æ±äº¬</span>
            </div>
            <div class="flow">
              <div class="flowItem"><span class="dot"></span><div>â˜€ï¸ ä¸Šåˆ è¼•äº•æ¾¤ Check-out</div></div>
              <div class="flowItem"><span class="dot"></span><div>ğŸŒ† ä¸‹åˆ æŠµé”æ±äº¬</div></div>
            </div>
          </div>

          <div class="card" id="day4">
            <div class="cardHeader">
              <h3 class="cardTitle">DAY 4ï½œ02/24</h3>
              <span class="cardHint">æ±äº¬å¸‚å€</span>
            </div>
            <div class="flow">
              <div class="flowItem"><span class="dot"></span><div>æ¾€è°· / è¡¨åƒé“</div></div>
              <div class="flowItem"><span class="dot"></span><div>å±…é…’å±‹æ™šé¤</div></div>
            </div>
          </div>

          <div class="card" id="day5">
            <div class="cardHeader">
              <h3 class="cardTitle">DAY 5ï½œ02/25</h3>
              <span class="cardHint">æ±äº¬ â†’ æ¡ƒåœ’</span>
            </div>
            <div class="flow">
              <div class="flowItem"><span class="dot"></span><div>18:25 æˆç”°èµ·é£›</div></div>
              <div class="flowItem"><span class="dot"></span><div>21:50 æŠµé”æ¡ƒåœ’</div></div>
            </div>
          </div>

        </div>
      </section>

    </div>

    <!-- Tab Bar -->
    <nav class="tabbar">
      <a data-tab="home" class="active">ğŸ  é¦–é </a>
      <a data-tab="flight">âœˆï¸ æ©Ÿç¥¨</a>
      <a data-tab="itinerary">ğŸ—ºï¸ è¡Œç¨‹</a>
      <a data-tab="hotel">ğŸ¡ ä½å®¿</a>
      <a data-tab="packing">ğŸ’ è¡Œæ</a>
    </nav>

  </div>

  <script>
    /* ===== TODAY + é›¢ç·š ===== */
    const todayMain = document.getElementById('todayMain');
    const todayRoute = document.getElementById('todayRoute');
    const todayNote = document.getElementById('todayNote');
    const todayHint = document.getElementById('todayHint');
    const todayCard = document.getElementById('todayCard');

    const tripStart = new Date('2026-02-21T00:00:00');
    const todayConfig = [
      { title:'Day 1ï½œå‡ºç™¼æ—¥', route:'æ¡ƒåœ’ â†’ è¼•äº•æ¾¤', note:'ç§»å‹•æ—¥', target:'day1' },
      { title:'Day 2ï½œè¼•äº•æ¾¤', route:'è¼•äº•æ¾¤', note:'èµ°è·¯å¤š', target:'day2' },
      { title:'Day 3ï½œåŸå¸‚åˆ‡æ›', route:'è¼•äº•æ¾¤ â†’ æ±äº¬', note:'ç¯€å¥è®Šå¿«', target:'day3' },
      { title:'Day 4ï½œæ±äº¬', route:'æ±äº¬å¸‚å€', note:'æ”¾é¬†é€›è¡—', target:'day4' },
      { title:'Day 5ï½œè¿”ç¨‹', route:'æ±äº¬ â†’ æ¡ƒåœ’', note:'é ç•™æ©Ÿå ´æ™‚é–“', target:'day5' }
    ];

    function updateToday() {
      if (!navigator.onLine) {
        todayHint.textContent = 'ç›®å‰é›¢ç·š';
        todayNote.textContent = 'å·²é¡¯ç¤ºå¿«å–è³‡è¨Š';
        return;
      }

      const diff = Math.floor((new Date() - tripStart) / 86400000);
      if (diff < 0) {
        todayMain.textContent = 'å‡ºç™¼å‰ï½œæº–å‚™å°±ç·’';
        todayRoute.textContent = 'â€”';
        todayNote.textContent = 'ç¢ºèªè­‰ä»¶èˆ‡è¡Œæ';
        todayCard.onclick = null;
      } else if (diff < todayConfig.length) {
        const d = todayConfig[diff];
        todayMain.textContent = d.title;
        todayRoute.textContent = d.route;
        todayNote.textContent = d.note;
        todayCard.onclick = () => {
          document.querySelector('[data-tab="itinerary"]').click();
          setTimeout(() => document.getElementById(d.target).scrollIntoView({ behavior:'smooth' }), 300);
        };
      } else {
        todayMain.textContent = 'æ—…ç¨‹çµæŸï½œå›æ†¶æ•´ç†ä¸­';
        todayRoute.textContent = 'â€”';
        todayNote.textContent = 'ç…§ç‰‡æ…¢æ…¢æ•´ç†';
        todayCard.onclick = null;
      }
    }

    updateToday();
    window.addEventListener('online', updateToday);
    window.addEventListener('offline', updateToday);

    /* ===== Hero å®‰å…¨åˆ‡æ›ï¼ˆä¿®æ­£åœ–ç‰‡è·¯å¾‘ï¼‰ ===== */
    const hero = document.getElementById('hero');
    const heroTitle = document.getElementById('heroTitle');
    const heroSub = document.getElementById('heroSub');
    const pillLoc = document.getElementById('pillLoc');

    const observer = new MutationObserver(() => {
      if (document.body.dataset.page === 'itinerary') {
        hero.style.backgroundImage = "url('assets/hero-tokyo.jpg')";
        heroTitle.textContent = '2026 åˆæ˜¥ Â· æ±äº¬';
        heroSub.textContent = 'åŸå¸‚ç¯€å¥ï¼Œæ…¢æ…¢æ¢ç´¢';
        pillLoc.textContent = 'ğŸ“ æ±äº¬';
      } else {
        hero.style.backgroundImage = "url('assets/hero-karuizawa.jpg')";
        heroTitle.textContent = '2026 åˆæ˜¥ Â· è¼•äº•æ¾¤';
        heroSub.textContent = 'æ…¢æ…¢èµ°ï¼ŒæŠŠæ™‚é–“ç•™çµ¦å½¼æ­¤';
        pillLoc.textContent = 'ğŸ“ è¼•äº•æ¾¤';
      }
    });
    observer.observe(document.body, { attributes:true });
  </script>

  <script src="app.js"></script>
</body>
</html>
